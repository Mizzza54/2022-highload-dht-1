# Stage 4

*Я попытался сделать профилирование, но из-за того что я использую стандартный клиент java, он не очень справляется с работой, особенно под нагрузкой от wrk. Профилирование оказалось не покащзательным тк мой сервер даже на миниимальных нагрузках захлебывается, тк погибает клиент. Не успел разобраться в чем именно была проблема. Постараюсь разобраться с классическим клиентом на следующем этапе.*

## Вывод(из того что сумел заметить):

1. Мы в разы потеряли в производительности, тк мы начали посылать запросы на несколько шардов.
2. Мы получили большую отказа устойчивость, но без сильных гарантий.
3. В моей реализации слабым местом является клиент и посылка сообщений между другими шардами. Желательно помеенять протокол, для более эффективной работы и добавить асинхронную работу с другими шардами, чтобы можно было не ждать последовательной обработки.

Методы усовершенствования:
1. Другой протокол (Udp например).
2. Сделать отдельного воркера на клиента.
3. Аснинхронная работа клиента

Также для усиления гарантий требуется реализовать паксос или рафт вместе с репликацией со временем путем госсипа. 